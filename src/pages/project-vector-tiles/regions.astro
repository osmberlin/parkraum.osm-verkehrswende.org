---
import { fetchRegionWithContent } from '@components/regions/utils/fetchRegions'
import LayoutArticlePage from '@layouts/LayoutArticlePage.astro'

const githubFilesWithContent = await fetchRegionWithContent()
---

<LayoutArticlePage title="Regionen">
  <h1>Regionen</h1>
  <div>
    {
      githubFilesWithContent.map((region) => {
        return (
          <div class="mb-5 border-b border-sky-200 pb-5 first:border-t">
            <h2 class="!mt-6">
              <code>{region.filename}</code>
            </h2>
            <p class="my-1">{region.content.properties?.name || '-'}</p>
            <p class="my-1">
              Gebiet:{' '}
              <>
                <code>{JSON.stringify(region.bounds)}</code>
                <br />
              </>
              Zentrum:{' '}
              <a
                href={`https://www.openstreetmap.org/#map=12/${region.center.geometry.coordinates
                  .reverse()
                  .join('/')}`}
              >
                <code>{JSON.stringify(region.center.geometry.coordinates)}</code>
              </a>
            </p>
            <p class="my-1">
              <a href={region.url}>Vorschau</a>
            </p>
          </div>
        )
      })
    }
  </div>
</LayoutArticlePage>
